<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculate Your Bill - SmileCare</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<!-- Hero section with title -->
<header class="bg-primary text-white text-center py-5">
  <h1 class="fw-bold">Dental Bill Calculator</h1>
  <p>Calculate your total cost including possible discounts!</p>
</header>

<!-- Main form section -->
<section class="container my-5">
  <div class="card p-4">
    <h2 class="text-center fw-bold mb-4">Select Services & Enter Your Age</h2>
    <form id="billForm">

      <!-- Age input -->
      <div class="mb-3 col-md-4">
        <label for="age" class="form-label">Your Age</label>
        <input type="number" class="form-control" id="age" placeholder="Enter your age" min="0" required>
      </div>

      <!-- Services table -->
      <table class="table table-bordered table-striped text-center">
        <thead class="table-primary">
          <tr>
            <th>Service</th>
            <th>Price (OMR)</th>
            <th>Select</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Dental Exams & Cleanings</td><td>15</td><td><input type="checkbox" name="service" value="15" data-name="Dental Exams & Cleanings"></td></tr>
          <tr><td>Dental Fillings</td><td>20</td><td><input type="checkbox" name="service" value="20" data-name="Dental Fillings"></td></tr>
          <tr><td>Root Canal Therapy</td><td>100</td><td><input type="checkbox" name="service" value="100" data-name="Root Canal Therapy"></td></tr>
          <tr><td>Tooth Extractions</td><td>50</td><td><input type="checkbox" name="service" value="50" data-name="Tooth Extractions"></td></tr>
          <tr><td>Night Guards & Mouthguards</td><td>25</td><td><input type="checkbox" name="service" value="25" data-name="Night Guards & Mouthguards"></td></tr>
          <tr><td>Teeth Whitening</td><td>60</td><td><input type="checkbox" name="service" value="60" data-name="Teeth Whitening"></td></tr>
          <tr><td>Dental Veneers</td><td>150</td><td><input type="checkbox" name="service" value="150" data-name="Dental Veneers"></td></tr>
          <tr><td>Dental Bonding</td><td>70</td><td><input type="checkbox" name="service" value="70" data-name="Dental Bonding"></td></tr>
          <tr><td>Dental Crowns</td><td>120</td><td><input type="checkbox" name="service" value="120" data-name="Dental Crowns"></td></tr>
          <tr><td>Dental Bridges</td><td>200</td><td><input type="checkbox" name="service" value="200" data-name="Dental Bridges"></td></tr>
          <tr><td>Dental Implants</td><td>400</td><td><input type="checkbox" name="service" value="400" data-name="Dental Implants"></td></tr>
          <tr><td>Dentures</td><td>250</td><td><input type="checkbox" name="service" value="250" data-name="Dentures"></td></tr>
          <tr><td>Orthodontics (Braces & Invisalign)</td><td>1200</td><td><input type="checkbox" name="service" value="1200" data-name="Orthodontics"></td></tr>
          <tr><td>Pediatric Dentistry</td><td>30</td><td><input type="checkbox" name="service" value="30" data-name="Pediatric Dentistry"></td></tr>
          <tr><td>Periodontal (Gum) Therapy</td><td>80</td><td><input type="checkbox" name="service" value="80" data-name="Periodontal Therapy"></td></tr>
          <tr><td>TMJ/TMD Therapy</td><td>100</td><td><input type="checkbox" name="service" value="100" data-name="TMJ/TMD Therapy"></td></tr>
        </tbody>
      </table>

      <!-- Buttons -->
      <div class="text-center mt-3">
        <button type="button" class="btn btn-primary me-2" onclick="calculateBill()">Calculate Total</button>
        <a href="index.html" class="btn btn-secondary">Return to Home</a>
      </div>
    </form>

    <!-- Result -->
    <div id="result" class="mt-3"></div>
  </div>
</section>


<!-- JavaScript for calculation -->
<script>
function calculateBill() {
  // Get the user's age
  var age = parseInt(document.getElementById('age').value);

  // Get all service checkboxes
  var services = document.getElementsByName('service');
  var total = 0;
  var selectedServices = [];

  // Loop through services to check which are selected
  for (var i = 0; i < services.length; i++) {
    if (services[i].checked) {
      var price = parseFloat(services[i].value);   // Get price of selected service
      var name = services[i].dataset.name;         // Get service name
      total += price;                               // Add price to total
      selectedServices.push({name: name, price: price}); // Save selected service info
    }
  }

  // If no service is selected, show a message and exit
  if (selectedServices.length === 0) {
    document.getElementById('result').innerHTML = "<div class='alert alert-warning text-center'>Please select at least one service.</div>";
    return;
  }

  // Apply 10% discount if user is elderly (60 or older)
  var discount = 0;
  if (age >= 60) {
    discount = total * 0.10;
  }

  // Calculate final amount after discount
  var finalAmount = total - discount;

  // Build the result HTML
  var resultHTML = "<h4 class='text-center mb-3'>Your Selected Services</h4>";
  resultHTML += "<div class='row g-3'>";

  // Each service in a Bootstrap card
  for (var j = 0; j < selectedServices.length; j++) {
    resultHTML += "<div class='col-md-4'>";
    resultHTML += "<div class='card shadow-sm'>";
    resultHTML += "<div class='card-body'>";
    resultHTML += "<h6 class='card-title'>" + selectedServices[j].name + "</h6>";
    resultHTML += "<p class='card-text'>Price: <strong>" + selectedServices[j].price.toFixed(2) + " OMR</strong></p>";
    resultHTML += "</div></div></div>";
  }
  resultHTML += "</div>"; // close row

  // Totals section
  resultHTML += "<div class='mt-4 p-3 border rounded bg-light'>";
  resultHTML += "<p>Total before discount: <strong>" + total.toFixed(2) + " OMR</strong></p>";
  if (discount > 0) {
    resultHTML += "<p>Elderly Discount (10%): -<strong>" + discount.toFixed(2) + " OMR</strong></p>";
  } else {
    resultHTML += "<p>No discount applied.</p>";
  }
  resultHTML += "<p class='fs-5 fw-bold'>Final Total: " + finalAmount.toFixed(2) + " OMR</p>";
  resultHTML += "</div>";

  // Display the result
  document.getElementById('result').innerHTML = resultHTML;
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
